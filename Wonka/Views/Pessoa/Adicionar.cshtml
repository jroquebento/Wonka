@{
    ViewBag.Title = "Adicionar";
}

<head>
    <script>
        contadorDocumento = 1;
        contadorTelefone = 1;

        //Criar função de adicionar documento
        function adicionarDocumento() {
            if (validarDocumento()) {
                var tipo = $('#txtTipoDocumento').val();
                var numero = $('#txtNumeroDocumento').val();

                var linha = novaLinha("Documento", tipo, null, numero);
                $('#tabDocumento tbody').append(linha);

                contadorDocumento++;
                limparDadosDocumento();
            }
        }

        function adicionarTelefone() {
            var tipo = $('#txtTipoTelefone').val();
            var ddd = $('#txtDDD').val();
            var numero = $('#txtNumeroTelefone').val();


            var linha = novaLinha("Telefone", tipo, ddd, numero);
            $('#tabTelefone tbody').append(linha);

            contadorTelefone++;
            limparDadosTelefone();
        }

        function novaLinha(tr, tipo, ddd, numero) {
            var id = tr + contadorDocumento;
            var linha = $('<tr id=' + id + '>');
            var colunaTipo = $('<td id=tipo' + tr + '>').text(tipo);
            var colunaNumero = $('<td id=numero' + tr + '>').text(numero);
            var colunaDDD = $('<td id=DDD' + tr + '>').text(ddd);
            var colunaRemover = $("<td>");

            var link = $("<a>").attr("href", "javascript:deletarLinha(" + id + ")");
            var icone = $("<i>").addClass("fas fa-trash-alt");

            link.append(icone);
            colunaRemover.append(link);

            linha.append(colunaTipo);
            tr == "Telefone" ? linha.append(colunaDDD) : null;
            linha.append(colunaNumero);
            linha.append(colunaRemover);

            return linha;
        }

        function deletarLinha(elemento) {
            $(elemento).remove();
        }

        function limparDadosDocumento() {
            $('#txtTipoDocumento').val('');
            $('#txtNumeroDocumento').val('');
        }

        function limparDadosTelefone() {
            $('#txtTipoTelefone').val('');
            $('#txtDDD').val('');
            $('#txtNumeroTelefone').val('');
        }

        function validarDocumento() {
            if ($('#txtTipoDocumento').val().length == 0 || $('#txtNumeroDocumento').val().length == 0) {
                alert('Favor cadastrar tipo e número!')
                return false;
            }
            return true;
        }

        function salvar() {

        }

        //Criando json
        function createJSON() {
            jsonObjeto = [];

            jsonObjeto.Pessoa = {
                "Nome": 'Nome',
                "Sobrenome": 'SobreNome'
            };

            jsonObjeto.Endereco = {
                "Tipo": 'Tipo',
                "Logradouro": 'Logradouro',
                "Numero": 'Numero',
                "Bairro": 'Bairro',
                "CEP": 'CEP',
                "Cidade": 'Cidade',
                "UF": 'UF'
            };

            //Montar JSON Documento
            jsonObjeto.Documento = [];
            var qtdeElementos = document.getElementById("tabelaDocumento").rows.length;
            if (qtdeElementos > 0) {
                for (i = 0; i < qtdeElementos; i++) {

                    var itemDocumento = {
                        "Tipo": $('td[id="tipoDocumento"]')[i].innerText,
                        "Numero": $('td[id="numeroDocumento"]')[i].innerText
                    }
                    jsonObjeto.Documento.push(itemDocumento);
                }
            }

            //Montar JSON Telefone
            jsonObjeto.Telefone = [];
            var qtdeElementos = document.getElementById("tabelaTelefone").rows.length;
            if (qtdeElementos > 0) {
                for (i = 0; i < qtdeElementos; i++) {

                    var itemTelefone = {
                        "Tipo": $('td[id="tipoTelefone"]')[i].innerText,
                        "DDD": $('td[id="DDDTelefone"]')[i].innerText,
                        "Numero": $('td[id="numeroTelefone"]')[i].innerText

                    }
                    jsonObjeto.Telefone.push(itemTelefone);
                }

                console.log(jsonObjeto);
            }
        }

    </script>
</head>

<title>@ViewBag.Title</title>

<h1>Adicionar PessoaS</h1>

<div id="adicionarPessoa">
    <ul class="nav nav-tabs nav-pills bg-light  mt-4 mb-3">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#tabPessoa">Pessoa</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#tabDocumento">Documento</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#tabEndereco">Endereço</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#tabTelefone">Telefone</a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane container active" id="tabPessoa">
            <div class="form-row">
                <div class="form-group col-md-3">
                    <label for="txtNome">Nome</label>
                    <input type="text" id="txtNome" class="form-control">
                </div>
                <div class="form-group col-md-3">
                    <label for="txtSobrenome">Sobrenome</label>
                    <input type="text" id="txtSobrenome" class="form-control">
                </div>
            </div>


        </div>

        <div class="tab-pane container fade" id="tabTelefone">
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="txtTipoTelefone">Tipo</label>
                    <input type="text" id="txtTipoTelefone" class="form-control">
                </div>
                <div class="form-group col-md-1">
                    <label for="txtDDD">DDD</label>
                    <input type="text" id="txtDDD" class="form-control">
                </div>
                <div class="form-group col-md-2">
                    <label for="txtNumeroTelefone">Número</label>
                    <input type="text" id="txtNumeroTelefone" class="form-control">
                </div>
                <div class="col-md-5 ml">
                    <label for="#">&nbsp;</label>
                    <div>
                        <a href="javascript:adicionarTelefone();">
                            <i class="btn-lg fa fa-plus"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Tipo</th>
                            <th scope="col">DDD</th>
                            <th scope="col">Número</th>
                        </tr>
                    </thead>
                    <tbody id="tabelaTelefone">                        
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tab-pane container fade" id="tabDocumento">
            <div class="form-row">
                <div class="form-group col-md-3">
                    <label for="txtTipoDocumento">Tipo</label>
                    <input type="text" id="txtTipoDocumento" class="form-control">
                </div>
                <div class="form-group col-md-4">
                    <label for="txtNumeroDocumento">Número</label>
                    <input type="text" id="txtNumeroDocumento" class="form-control">
                </div>
                <div class="col-md-4 ml">
                    <label for="#">&nbsp;</label>
                    <div><a href="javascript:adicionarDocumento();"><i class="btn-lg fa fa-plus"></i></a></div>
                </div>

            </div>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Tipo</th>
                            <th scope="col">Número</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody id="tabelaDocumento">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tab-pane container fade" id="tabEndereco">
            <div class="form-row">
                <div class="form-group col-md-3">
                    <label for="txtTipoEndereco">Tipo</label>
                    <input type="text" id="txtTipoEndereco" class="form-control">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="txtLogradouro">Logradouro</label>
                    <input type="text" id="txtLogradouro" class="form-control">
                </div>
                <div class="form-group col-md-1">
                    <label for="txtNumeroEndereco">Número</label>
                    <input type="text" id="txtNumeroEndereco" class="form-control">
                </div>
                <div class="form-group col-md-3">
                    <label for="txtBairro">Bairro</label>
                    <input type="text" id="txtBairro" class="form-control">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-1">
                    <label for="txtCEP">CEP</label>
                    <input type="text" id="txtCEP" class="form-control">
                </div>
                <div class="form-group col-md-3">
                    <label for="txtCidade">Cidade</label>
                    <input type="text" id="txtCidade" class="form-control">
                </div>
                <div class="form-group col-md-3">
                    <label for="txtUF">UF</label>
                    <input type="text" id="txtUF" class="form-control">
                </div>
            </div>
        </div>
        <div class="btn-group mt-2">
            <div>
                <button class="btn btn-success mr-3 " onclick="createJSON();">Salvar</button>
            </div>

            <div>
                <a href="@Url.Action("Index","Pessoa")" class="btn btn-danger">Voltar</a>
            </div>

        </div>
    </div>
</div>

